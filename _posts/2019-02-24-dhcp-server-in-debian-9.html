---
layout: post
title: DHCP server in Debian 9
date: 2019-02-24 17:03:39.000000000 +02:00
type: post
parent_id: '0'
published: true
password: ''
status: publish
categories:
- How to
tags:
- Debian
- DHCP
- Linux
meta:
  ratings_users: '0'
  ratings_score: '0'
  ratings_average: '0'
  _edit_last: '1'
author:
  login: wizzy
  email: wizzy@wizzycom.net
  display_name: wizzy
  first_name: ''
  last_name: ''
permalink: "/dhcp-server-in-debian-9/"
---
<p><!-- wp:paragraph --></p>
<p>These are the steps that I followed, in order to make a DHCP server in Debian 9 Stretch.</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:paragraph --></p>
<p>First of all we need to assign an IP address on our main ethernet interface. For this guide, I will use interface <strong>enp0s2</strong>. So we have to edit the file <strong>/etc/network/interfaces</strong> and add the following :</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:preformatted --></p>
<pre class="wp-block-preformatted">auto enp2s0<br /> allow-hotplug enp2s0<br /> iface enp2s0 inet static<br />         address 192.168.1.1/24<br />         dns-nameservers 8.8.8.8<br />         dns-search mydomain.com</pre>
<p><!-- /wp:preformatted --></p>
<p><!-- wp:paragraph --></p>
<p>Then we need to download our dhcp package. </p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:preformatted --></p>
<pre class="wp-block-preformatted">sudo apt install isc-dhcp-server</pre>
<p><!-- /wp:preformatted --></p>
<p><!-- wp:more --><br />
<!--more--><br />
<!-- /wp:more --></p>
<p><!-- wp:paragraph --></p>
<p>After the package installation we backup the default configuration file and we create a new one for our setup</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:preformatted --></p>
<pre class="wp-block-preformatted">sudo mv /etc/dhcp/dhcpd.conf /etc/dhcp/dhcpd.conf.backup<br />sudo nano /etc/dhcp/dhcpd.conf</pre>
<p><!-- /wp:preformatted --></p>
<p><!-- wp:paragraph --></p>
<p>Just add the following on <strong>/etc/dhcp/dhcpd.conf</strong></p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:preformatted --></p>
<pre class="wp-block-preformatted">option domain-name "mydomain.com";<br /> option domain-name-servers 8.8.8.8;<br /> default-lease-time 3600;<br /> max-lease-time 7200;<br /> authoritative;<br />subnet 192.168.1.0 netmask 255.255.255.224 {<br />   range 192.168.1.10 192.168.1.253;<br />   option subnet-mask 255.255.255.0;<br />   option broadcast-address 192.168.1.255;<br />   option routers 192.168.1.254;<br />  </pre>
<p><!-- /wp:preformatted --></p>
<p><!-- wp:paragraph --></p>
<p>For ip reservations you can add the following on <strong>/etc/dhcp/dhcpd.conf</strong></p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:preformatted --></p>
<pre class="wp-block-preformatted">host station1 {<br />    option host-name "station1.mydomain.local";<br />    hardware ethernet 00:11:22:33:44:AA;<br />    fixed-address 192.168.1.100;</pre>
<p><!-- /wp:preformatted --></p>
<p><!-- wp:paragraph --></p>
<p>Last, we have to assing on which interface the DHCP server will listen. We edit the file <strong>/etc/default/isc-dhcp-server</strong> and we set the interfaces seperated by comma </p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:preformatted --></p>
<pre class="wp-block-preformatted">INTERFACES="enp0s2"</pre>
<p><!-- /wp:preformatted --></p>
<p><!-- wp:paragraph --></p>
<p>Enable and start the DHCP service</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:preformatted --></p>
<pre class="wp-block-preformatted">sudo systemctl enable isc-dhcp-server.service<br />sudo systemctl start isc-dhcp-server.service </pre>
<p><!-- /wp:preformatted --></p>
<p><!-- wp:paragraph --></p>
<p>At anytime if you want to see the leases of the DHCP server, simply execute the following command</p>
<p><!-- /wp:paragraph --></p>
<p><!-- wp:preformatted --></p>
<pre class="wp-block-preformatted">sudo dhcp-lease-list</pre>
<p><!-- /wp:preformatted --></p>
<p><!-- wp:paragraph --></p>
<p>Good luck</p>
<p><!-- /wp:paragraph --></p>
<p>[ratings]</p>
